# Задаем образ из которого будет создан контейнер (можно найти на dockerhub)
FROM golang:1.25.7-alpine3.23

# Создаем папку внутри контейнера и назначаем ее рабочей директорией
WORKDIR /app

COPY go.mod ./
# COPY go.sum ./  <-- Раскомментируй, когда файл появится

# Сборка зависимостей (в данном случае скачиваем необходимые зависимости из файла go.mod)
RUN go mod download

# Копируем файлы в контейнер (из текущей в рабочую директорию)
COPY . ./

# Выполняется, когда контейнер запускается
# В данном случае процесс запускается напрямую (не "go run main.go")
CMD ["go", "run", "main.go"]

# Если ты изменишь хотя бы одну строчку в main.go, Docker увидит, 
# что слой COPY изменился, и начнет заново скачивать все библиотеки 
# из интернета через go mod download, даже если список библиотек не менялся.